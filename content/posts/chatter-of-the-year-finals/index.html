<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vote yuniDev | dgger of the Year</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.destiny.gg/emotes/emotes.css" type="text/css" rel="stylesheet" media="screen">
</head>
<body>

    <div class="stage">
        <img src="assets/GlorpShip.png" id="glorp-ship">

        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <div class="controls">
            <button id="prevBtn" title="Previous">←</button>
            <button id="togglePlay" title="Pause/Play">❚❚</button>
            <button id="nextBtn" title="Next">→</button>
        </div>

        <div class="slide active" id="slide-1" data-duration="5000">
            <div class="content-center">
                <h1>yuniDev</h1>
                <h2>FOR DGGER OF THE YEAR</h2>
                <p>Based bonger #1 <span class="emote UWOTM8"></span></p>
            </div>
        </div>

        <div class="slide" id="slide-2" data-duration="8000">
            <div class="content-center">
                <h2><div class="emote PEPE"></div> Interactive Olympics <div class="emote YEE"></div></h2>
                <p>I developed the minigames for the Olympics event, including all of the art!</p>
                <div class="gallery">
                    <img src="assets/OlympicsScreenshot1.png" class="olympics-screenshot" alt="Olympics UI">
                    <img src="assets/OlympicsScreenshot2.png" class="olympics-screenshot" alt="Olympics Gameplay">
                </div>
                <img src="assets/Bigstiny.png" class="doodle bigstiny" alt="Bigstiny">
                <img src="assets/GlorpShip.png" class="doodle glorp-small" alt="Glorp">
                <img src="assets/PepeChristmas.png" class="doodle pepe" alt="Pepe">
                <img src="assets/Yee.png" class="doodle yee" alt="Yee">
                <br>
                <p><small>Everyone <span class="emote peepoHug"></span> Pagi, Elruem, JohnHentai, Futanari, chacha, Tort, Furtiv, MrGemzar, and everyone else that worked on the Olympics!</small></p>
            </div>
        </div>

        <div class="slide" id="slide-3" data-duration="8000">
            <div class="content-center">
                <h2>Better than Kickstiny?</h2>
                <div class="screenshot-container">
                    <img src="assets/ScriptScreenshot.png" alt="Kick Embed Script Screenshot" class="feature-screenshot">
                </div>
                <div class="features-list">
                    <p>Embeds the native Kick player directly within DGG!</p>
                    <ul>
                        <li><span class="check">✓</span> Native Quality Options</li>
                        <li><span class="check">✓</span> Volume Control</li>
                        <li><span class="check">✓</span> Live Rewinding</li>
                    </ul>
                    <a href="https://greasyfork.org/en/scripts/527980-better-dgg-kick-embed" target="_blank" class="link-highlight">Get the script</a>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-4" data-duration="10000">
            <div class="split-screen">
                <div class="half left">
                    <h3>Better Kick Embed (me)</h3>
                    <ul>
                        <li>- Plain old vanilla JS</li>
                        <li>- Native Kick Player</li>
                        <li>- Unobfuscated</li>
                    </ul>
                    <div class="roast-gallery">
                        <figure>
                            <img src="assets/yuniDevCode.png" class="roast-img-styled">
                            <figcaption>Simple and clean code</figcaption>
                        </figure>
                    </div>
                </div>
                <div class="half right">
                    <h3>Kickstiny (JaydrVernanda)</h3>
                    <ul>
                        <li>- Using React for a userscript??? <div class="emote NAHH"></div></li>
                        <li>- No live rewind</li>
                        <li>- Watchless?</li>
                    </ul>
                    <div class="roast-gallery">
                        <figure>
                            <img src="./assets/TickTock.png" class="roast-img-styled">
                            <figcaption><div class="emote CHUD"></div> It's time to buy a watch Jaydr</figcaption>
                        </figure>
                        <figure>
                            <img src="./assets/jaydrCode.png" class="roast-img-styled">
                            <figcaption><div class="emote Susge"></div>Not a bitcoin miner btw</figcaption>
                        </figure>
                    </div>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-5" data-duration="28000">
            <div class="content-center">
                <h2>Coming Soon... <div class="emote SOON"></div></h2>
                <div class="video-wrapper">
                    <video id="gameTrailer" controls>
                        <source src="assets/trailer.mp4" type="video/mp4">
                    </video>
                    <div id="videoOverlay" class="video-overlay" style="display: none;">
                        <svg viewBox="0 0 24 24" fill="white">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                    </div>
                </div>
                <p style="font-size: 1.5rem; color: var(--accent-secondary); margin-top: 1rem;">
                    Aiming for a demo around Easter 2026! <span class="emote Copium"></span>!!!
                </p>
            </div>
        </div>

        <div class="slide" id="slide-6" data-duration="8000">
            <div class="content-center">
                <h2>Glowing Testimonials</h2>
                <div class="testimonial-gallery">
                    <img src="assets/testimonial_metaloid.png" class="testimonial-img m1" alt="Testimonial 1">
                    <img src="assets/testimonial_infinitt.png" class="testimonial-img m2" alt="Testimonial 2">
                    <img src="assets/testimonial_pizza.png" class="testimonial-img m3" alt="Testimonial 3">
                </div>
            </div>
        </div>

        <div class="slide" id="slide-7" data-duration="10000">
            <div class="content-center">
                <h2>I make memes sometimes</h2>
                <div class="meme-grid">
                    <figure>
                        <img src="assets/memes/dancam.png" class="meme-img" alt="Dan Camera">
                        <figcaption>Worse than forsen</figcaption>
                    </figure>
                    <figure>
                        <img src="assets/memes/weouttagold.png" class="meme-img" alt="WeOuttaGold">
                        <figcaption>She dug it all up</figcaption>
                    </figure>
                    <figure>
                        <img src="assets/memes/bogged.png" class="meme-img" alt="Bogged">
                        <figcaption><div class="emote dinkDonk"></div> start stream</figcaption>
                    </figure>
                    <figure>
                        <img src="assets/memes/baldstiny.png" class="meme-img" alt="Baldstiny">
                        <figcaption><div class="emote BINGQILIN"></div> THE BEARD IS NOT PATCHY</figcaption>
                    </figure>
                </div>
            </div>
        </div>

        <div class="slide" id="slide-8" data-duration="60000">
            <div class="content-center">
                <h1>VOTE yuniDev</h1>
                <p>DGGer of the year</p>
                <button class="cta-btn" onclick="location.reload()">Do it all again <div class="emote Shroomstiny"></div></button>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const slides = document.querySelectorAll('.slide');
            const progressBar = document.getElementById('progressBar');
            const toggleBtn = document.getElementById('togglePlay');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            let currentSlide = 0;
            let isPlaying = true;
            let slideTimer;
            let transitionTimeout;
            let cleanupTimeout;
            let videoUpdateInterval; // For tracking video progress

            function showSlide(index) {
                if (index < 0) index = 0;
                if (index >= slides.length) index = slides.length - 1;
                
                // Clear any pending transitions/timeouts
                clearTimeout(transitionTimeout);
                clearTimeout(cleanupTimeout);
                cancelAnimationFrame(videoUpdateInterval);

                // Ensure clean state if rapid clicking
                document.querySelector('.stage').classList.remove('no-transition');

                const performSwap = () => {
                     // If we are moving, mark current as exit
                    if (currentSlide !== index) {
                        slides[currentSlide].classList.add('exit');
                        slides[currentSlide].classList.remove('active');
                        
                        // Pause video if leaving slide
                        const prevVideo = slides[currentSlide].querySelector('video');
                        if (prevVideo) prevVideo.pause();
                    }

                    // Clean up others
                    slides.forEach((s, i) => {
                        if (i !== currentSlide && i !== index) {
                            s.classList.remove('active');
                            s.classList.remove('exit');
                            const v = s.querySelector('video');
                            if (v) v.pause();
                        }
                    });

                    currentSlide = index;
                    const slide = slides[currentSlide];
                    
                    slide.classList.remove('exit');
                    slide.classList.add('active');

                    // Reset progress bar
                    progressBar.style.transition = 'none';
                    progressBar.style.width = '0%';
                    
                    clearTimeout(slideTimer);

                    // Check for video in new slide
                    const newVideo = slide.querySelector('video');
                    const overlay = slide.querySelector('.video-overlay');

                    if (newVideo) {
                        // Video Slide Logic
                        newVideo.removeAttribute('controls'); // Ensure controls are hidden
                        newVideo.currentTime = 0;
                        newVideo.volume = 0.5;
                        
                        if (overlay) overlay.style.display = 'none';

                        if (isPlaying) {
                            toggleBtn.textContent = "❚❚";
                            newVideo.play().then(() => {
                                if (overlay) overlay.style.display = 'none';
                            }).catch(e => {
                                console.log("Auto-play prevented:", e);
                                isPlaying = false;
                                toggleBtn.textContent = "▶";
                                if (overlay) overlay.style.display = 'flex';
                            });
                        } else {
                             toggleBtn.textContent = "▶";
                             if (overlay) overlay.style.display = 'flex';
                        }
                        
                        // Use video duration for progress
                        trackVideoProgress(newVideo);

                    } else {
                        // Standard Slide Logic
                        if (isPlaying && currentSlide < slides.length - 1) {
                            const duration = parseInt(slide.getAttribute('data-duration'));
                            startTimer(duration);
                            toggleBtn.textContent = "❚❚";
                        } else if (currentSlide === slides.length - 1) {
                            isPlaying = false;
                            toggleBtn.textContent = "↻";
                        } else {
                             toggleBtn.textContent = "▶";
                        }
                    }
                };

                // Trigger Ship Animation on transitions (every even slide)
                if (index % 2 === 0 && index !== currentSlide) {
                    const stage = document.querySelector('.stage');
                    const ship = document.getElementById('glorp-ship');
                    
                    // Enable instant swap mode
                    stage.classList.add('no-transition');
                    
                    ship.classList.remove('ship-fly');
                    void ship.offsetWidth; // Force reflow
                    ship.classList.add('ship-fly');
                    
                    // Swap at midpoint (300ms for 0.6s animation)
                    transitionTimeout = setTimeout(() => {
                        performSwap();
                    }, 300);

                    // Cleanup
                    cleanupTimeout = setTimeout(() => {
                        stage.classList.remove('no-transition');
                    }, 700);

                } else {
                    // Immediate swap
                    performSwap();
                }
            }

            function trackVideoProgress(video) {
                const update = () => {
                    if (currentSlide !== Array.from(slides).indexOf(video.closest('.slide'))) return;
                    
                    if (video.duration) {
                        const pct = (video.currentTime / video.duration) * 100;
                        progressBar.style.width = `${pct}%`;
                    }

                    if (video.ended) {
                        nextSlide();
                    } else {
                        videoUpdateInterval = requestAnimationFrame(update);
                    }
                };
                videoUpdateInterval = requestAnimationFrame(update);
            }

            function startTimer(duration) {
                // Force reflow for progress bar
                void progressBar.offsetWidth;
                progressBar.style.transition = `width ${duration}ms linear`;
                progressBar.style.width = '100%';

                slideTimer = setTimeout(() => {
                    nextSlide();
                }, duration);
            }

            function nextSlide() {
                if (currentSlide < slides.length - 1) {
                    showSlide(currentSlide + 1);
                } else {
                    isPlaying = false;
                    toggleBtn.textContent = "↻";
                }
            }

            function prevSlide() {
                if (currentSlide > 0) {
                    showSlide(currentSlide - 1);
                }
            }

            function togglePlay() {
                const slide = slides[currentSlide];
                const video = slide.querySelector('video');

                if (currentSlide === slides.length - 1) {
                    // Reset everything to start
                    slides.forEach(s => {
                        s.classList.remove('active');
                        s.classList.remove('exit');
                    });
                    currentSlide = 0;
                    isPlaying = true;
                    toggleBtn.textContent = "❚❚";
                    showSlide(0);
                    return;
                }

                isPlaying = !isPlaying;

                if (video) {
                    const overlay = slide.querySelector('.video-overlay');
                    // Video Toggle Logic
                    if (isPlaying) {
                        video.play();
                        toggleBtn.textContent = "❚❚";
                        if (overlay) overlay.style.display = 'none';
                    } else {
                        video.pause();
                        toggleBtn.textContent = "▶";
                        if (overlay) overlay.style.display = 'flex';
                    }
                } else {
                    // Standard Slide Toggle Logic
                    if (isPlaying) {
                        toggleBtn.textContent = "❚❚";
                        const duration = parseInt(slide.getAttribute('data-duration'));
                        // Simplification: Restart timer on resume (complex pause/resume not implemented for CSS transition)
                        startTimer(duration); 
                    } else {
                        toggleBtn.textContent = "▶";
                        clearTimeout(slideTimer);
                        
                        const computedStyle = window.getComputedStyle(progressBar);
                        const width = computedStyle.getPropertyValue('width');
                        progressBar.style.transition = 'none';
                        progressBar.style.width = width;
                    }
                }
            }

            // Event Listeners
            const videoOverlay = document.getElementById('videoOverlay');
            if (videoOverlay) {
                videoOverlay.addEventListener('click', () => {
                    const slide = slides[currentSlide];
                    const video = slide.querySelector('video');
                    if (video) {
                        video.play();
                        videoOverlay.style.display = 'none';
                        isPlaying = true;
                        toggleBtn.textContent = "❚❚";
                    }
                });
            }

            toggleBtn.addEventListener('click', togglePlay);
            
            nextBtn.addEventListener('click', () => {
                if (!isPlaying) {
                    if (currentSlide < slides.length - 1) showSlide(currentSlide + 1);
                }
                else {
                    nextSlide();
                }
            });

            prevBtn.addEventListener('click', prevSlide);

            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight') {
                    if (!isPlaying && currentSlide < slides.length - 1) showSlide(currentSlide + 1);
                    else if (isPlaying) nextSlide();
                }
                if (e.key === 'ArrowLeft') {
                    prevSlide();
                }
                if (e.key === ' ') {
                    togglePlay();
                }
            });

            // Start
            showSlide(0);
        });
    </script>
</body>
</html>
